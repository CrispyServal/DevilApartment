# 魔王的公寓 (DevilApartment)

# 游戏概述

## 运行环境

本游戏运行于拥有较大屏幕，有鼠标和键盘的桌面电脑设备。

## 基本概念和情节

你作为落魄的魔界的王，需要在恶劣的魔界环境中，建设，维护，保护最后魔界的一座建筑物。
你的子民们都居住在这里。你们需要共同发展工农业，建设国防设施，战胜恶劣环境，最终实现魔界的伟大复兴。

## 游戏特征

1. 作为基本的经营游戏，玩家决策具有深远的影响，这就像生物的进化，每次只能改变一点。玩家发现决策错误的时候，可能是决策很久之后，同时此时解决问题的手段的影响也不是短时而强有力的，而同样是影响力有限但是深远的。
2. 游戏的环境有多个维度，例如温度，湿度，光照等。系统的各个环节对不同的环境敏感，这对玩家的决策提出更高的要求。
3. 整个公寓的建筑是自定义的。玩家作为魔王，需要亲自设计建筑，然后由特定类别的居民来建造。建筑材料是多样的，他们也受环境影响。例如高温可能造成木制材料的燃烧。
4. 居民是有需求和兴趣的，魔王必须考虑如何、以何种程度地满足他们。需求和兴趣未得到满足的居民可能出现很多负面的行为。
5. 资源的转移和配给也是需要考虑的一部分。例如公寓的楼道，电梯等设备的设计，将影响居民和物资在各区域间转移的效率，从而影响整个系统。

## 游戏定位

如果玩家喜欢玩《缺氧》《异星工厂》等游戏，他们应该会喜欢本游戏。

本游戏的最终目标是将恢复魔王的实力，反攻人类。

##　游戏风格

游戏整体风格黑暗，但是有一些可爱。黑暗的风格用来符合魔界的主题，同时用来描写魔界自然环境的恶劣。可爱用来让玩家产生共情，认为我们魔界的人是正面的一方，人类才是反派。

音乐可以参考《植物大战僵尸》[夜晚](https://www.bilibili.com/video/BV1As411h7vQ?p=3)的风格。但是要削弱“进行”的味道，保留氛围即可。



# 游戏机制

## 游戏性设计

### 建筑设计的乐趣

游戏中包含多种基本的材料，这些材料都可以用来当作砖块来进行建筑。

同时游戏中包含很多固定物品，这些物品具有装饰性和功能性。可以摆在公寓各处。

### 发展的乐趣

整个公寓的规模会越来越大。
国家的财产会越来越丰富。
居民人口会越来越多。

### 发掘规律的乐趣

玩家熟悉游戏机制后，可以利用一些机制来做产业升级或击溃外敌。

### 编程的乐趣

例如公寓的电梯将提供编程接口，玩家将自己设计电梯运行的逻辑。

## 玩法和规则

### 视角

视角为侧视图：墙壁为剖面，可观察到背景墙，前景墙不存在。
可观察到房间内的物品和居民的实时位置和动态。

### 操作

游戏主要使用鼠标操作，键盘操作作为辅助。可缩放、移动视角以观察局部或全局。

鼠标左键点击可以查看各物品的状态信息。具体操作见用户界面和交互一节。

### 游戏流程概述

游戏开始后，玩家看到主菜单。主菜单包含开始游戏，继续游戏，设置，退出游戏等选项。
开始或继续游戏后，视角即进入游戏中的侧视图。

TODO

### 规则

#### 建筑和方块

建筑由2维空间内的小正方形组成。每个小正方形称为一个方块。
方块一经摆放，则固定位置不动。
方块与居民之间有碰撞。居民在脚下的方块上行走和站立。

未有建筑之前，地面本身是方块。

方块可以被破坏。一个方块的破坏动作本身不影响其周围方块。

#### 居民、家具和实体

除方块外，游戏中还有实体。
实体具有碰撞箱，能与方块碰撞，或与特定类别的实体碰撞。碰撞规则见后文。

实体是有重力的刚体。主要表现为以下几个行为：

1. 实体下方没有方块和对其可碰撞的实体时，实体会下落。
2. 有初速度的前提下，实体会移动。例如被发射的炮弹会以抛物线的轨迹运动。


实体也可破坏，在可破坏方面的计算与方块一致。

#### 可破坏性

实体或方块拥有生命值HP，当HP为0时则损坏。

一些实体（如炮弹）拥有两个额外的数值：

1. 普遍攻击力：定义其对所有其他实体和方块的HP的伤害。
2. 特殊攻击列表：定义其对哪些特定实体和方块拥有额外HP伤害。

方块和实体破坏时，可以转化为其他实体。

转换由被破坏方块，攻击方，概率来决定。
例如：将桌子打破，可能生成两个木棍。

#### 运动和通道

居民除了可以在方块上行走之外，也可以通过通道移动。

通道与方块如同在不同的频道，互相不占对面的位置。通道可以实现实体穿过墙壁移动。


#### 机器

某些实体具有一些特定功能。例如生产其他实体。可以叫做机器或器械。

这些机器有的需要操作鬼员才能正常工作。

## 用户界面

## 交互

# 人工智能

（npc行为详细描述）

# 游戏元素

## 角色（居民）

### 魔王

代表玩家自己。身强力壮，战斗力强，恢复能力强。

但是不干活。

初期可作为重要国防力量。

魔王需要持续输入能量，进行身体上的恢复。

成长一定程度后，魔王体型增大，粘在建筑上，无法移动，只到完成复苏。

魔王粘住后，逐步转化为雌性，获得生育能力。新的居民均从此处产生。
产生何种居民将由魔王的最近饮食决定。

### 小鬼

社会最底层，任劳任怨。善搬运，善建筑。但是都不精通。脑子比较笨。不能操作复杂的器械。
形象像个小煤球。

### 聪明鬼

聪明鬼长得高瘦，可操作复杂器械。体力差，吃得多，精神需求多，容易患精神疾病。

## 物品
## 对象（实体）

电梯之类的

# 游戏过程

# 技术分析

# 附录

## 碰撞关系表

## 